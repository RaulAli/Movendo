<div class="auth-page">
  <div class="container page">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5">
        <div class="auth-card">
          <div class="auth-header">
            <h1 class="auth-title">{{ title }}</h1>
            <p class="auth-subtitle">
              <a [routerLink]="['/auth/login']" *ngIf="authType === 'register'">¿Ya tienes una cuenta?</a>
              <a [routerLink]="['/auth/register']" *ngIf="authType === 'login'">¿Necesitas una cuenta?</a>
            </p>
          </div>

          <div *ngIf="errors.length > 0" class="alert alert-danger">
            <ul class="mb-0">
              <li *ngFor="let error of errors">{{ error }}</li>
            </ul>
          </div>

          <form [formGroup]="authForm" (ngSubmit)="submitForm()" class="auth-form">
            <fieldset [disabled]="isSubmitting">

              <div class="form-field" *ngIf="authType === 'register'">
                <div class="input-container">
                  <div class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                      <path d="M20 21V19C20 16.7909 18.2091 15 16 15H8C5.79086 15 4 16.7909 4 19V21"
                        stroke="currentColor" stroke-width="2" />
                      <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" />
                    </svg>
                  </div>
                  <input formControlName="username" class="form-input" type="text" placeholder="Nombre de usuario" />
                </div>
                <div *ngIf="authForm.get('username')?.invalid && authForm.get('username')?.touched"
                  class="error-message">
                  El nombre de usuario debe tener entre 6 y 20 caracteres
                </div>
              </div>

              <div class="form-field">
                <div class="input-container">
                  <div class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                      <path
                        d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z"
                        stroke="currentColor" stroke-width="2" />
                      <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" />
                    </svg>
                  </div>
                  <input formControlName="email" class="form-input" type="email" placeholder="Correo electrónico" />
                </div>
                <div *ngIf="authForm.get('email')?.invalid && authForm.get('email')?.touched" class="error-message">
                  El correo electrónico debe ser válido y tener un formato correcto
                </div>
              </div>

              <div class="form-field">
                <div class="input-container">
                  <div class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                      <path
                        d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z"
                        stroke="currentColor" stroke-width="2" />
                      <path
                        d="M17 8.5H18C18.2652 8.5 18.5196 8.60536 18.7071 8.79289C18.8946 8.98043 19 9.23478 19 9.5V19.5C19 19.7652 18.8946 20.0196 18.7071 20.2071C18.5196 20.3946 18.2652 20.5 18 20.5H6C5.73478 20.5 5.48043 20.3946 5.29289 20.2071C5.10536 20.0196 5 19.7652 5 19.5V9.5C5 9.23478 5.10536 8.98043 5.29289 8.79289C5.48043 8.60536 5.73478 8.5 6 8.5H7"
                        stroke="currentColor" stroke-width="2" />
                      <path
                        d="M16 8.5V7.5C16 6.43913 15.5786 5.42172 14.8284 4.67157C14.0783 3.92143 13.0609 3.5 12 3.5C10.9391 3.5 9.92172 3.92143 9.17157 4.67157C8.42143 5.42172 8 6.43913 8 7.5V8.5"
                        stroke="currentColor" stroke-width="2" />
                    </svg>
                  </div>
                  <input formControlName="password" class="form-input" type="password" placeholder="Contraseña" />
                </div>
                <div *ngIf="authForm.get('password')?.invalid && authForm.get('password')?.touched"
                  class="error-message">
                  La contraseña debe tener entre 6 y 20 caracteres
                </div>
              </div>

              <button class="auth-submit-btn" [disabled]="isSubmitting || authForm.invalid"
                [class.is-submitting]="isSubmitting" type="submit">
                <span class="btn-text">{{ isSubmitting ? 'Procesando...' : 'Enviar' }}</span>
                <div class="btn-loader" *ngIf="isSubmitting"></div>
              </button>

            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>