generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model admin {
  id            String   @id @map("_id") @default(uuid())
  createdAt     DateTime @db.Date
  email         String   @unique
  isActive      Boolean
  password      String
  /// Could not determine type: the field only had null or empty values in the sample set.
  refreshTokens Json?
  status        String
  updatedAt     DateTime @db.Date
  username      String   @unique
}

model blacklistedtokens {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  expiresAt Json?
  /// Field referred in an index, but found no data to define the type.
  token     Json?  @unique(map: "token_1")

  @@index([expiresAt], map: "expiresAt_1")
}

model categories {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  v           Int?     @map("__v")
  createdAt   DateTime @db.Date
  descripcion String
  eventos     String[]
  image       String?
  isActive    Boolean
  nombre      String
  slug        String   @unique
  status      String
  updatedAt   DateTime @db.Date
}

model comments {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  v         Int      @map("__v")
  authorId  String
  author    users    @relation(fields: [authorId], references: [id])
  body      String
  createdAt DateTime @db.Date
  eventoId  String
  evento    eventos  @relation(fields: [eventoId], references: [id])
  isActive  Boolean
  status    String
  updatedAt DateTime @db.Date
}

model eventocategory {
  id         String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  categoryId Json?
  /// Field referred in an index, but found no data to define the type.
  eventoId   Json?

  @@unique([eventoId, categoryId])
}

model eventos {
  id              String    @id @default(auto()) @map("_id") @db.ObjectId
  authorId        String?
  author          users?    @relation("EventosDelAutor", fields: [authorId], references: [id])
  category        String
  ciudad          String
  comments        comments[]
  createdAt       DateTime  @db.Date
  endDate         DateTime  @db.Date
  favouritesCount Int
  image           String[]
  isActive        Boolean
  nombre          String
  price           Int
  slug            String    @unique
  slug_category   String[]
  startDate       DateTime  @db.Date
  status          String
  updatedAt       DateTime  @db.Date
  id_merchant     String[]
}

model users {
  id              String    @id @map("_id") @default(uuid())
  v               Int?      @map("__v")
  createdAt       DateTime  @db.Date
  email           String    @unique
  favouriteEvento String[]
  followersCount  Int
  followingCount  Int
  followingUsers  String[]
  image           String?
  isActive        Boolean
  password        String
  refreshTokens   String[]
  status          String
  updatedAt       DateTime  @db.Date
  username        String    @unique
  eventos         eventos[] @relation("EventosDelAutor")
  comments        comments[]
}

model ciudades {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  nombre    String   @unique
  slug      String   @unique
  isActive  Boolean  @default(true)
  createdAt DateTime? @db.Date
  updatedAt DateTime? @db.Date

  @@map("ciudades")
}

model merch_products {
  id          String    @id @map("_id") @default(uuid())
  brand       String
  name        String
  slug        String    @unique
  desc        String
  price       Float
  stock       Int
  images      String[]
  categoryId  String
  authorId    String
  isActive    Boolean
  status      String
  createdAt   DateTime  @db.Date
  updatedAt   DateTime  @db.Date
}

model merch_categories {
  id          String   @id @map("_id") @default(uuid())
  name        String
  slug        String   @unique
  desc        String
  isActive    Boolean
  authorId    String
  status      String
  createdAt   DateTime @db.Date
  updatedAt   DateTime @db.Date
}

model merchant_user {
  id           String    @id @map("_id") @default(uuid())
  username     String    @unique
  email        String    @unique
  password     String
  isActive     Boolean
  status       String
  createdAt    DateTime  @db.Date
  updatedAt    DateTime  @db.Date
  refreshToken String?
}

